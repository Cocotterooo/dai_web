---
import Layout from "./Layout.astro";
import AdminSidebar from "@/components/admin/adminSidebar/AdminSidebar.astro";

export interface Props {
    title?: string;
}

const { title = "Panel de Administración" } = Astro.props;

// Los permisos ya se verifican en el middleware
// Solo obtenemos los datos del usuario ya validados
const user = Astro.locals.user;
const userRoleIds = Astro.locals.userRoleIds || [];

console.log('🏗️ AdminLayout - Usuario validado:', user?.email);
console.log('🎭 AdminLayout - Roles disponibles:', userRoleIds);

// Obtener la ruta actual para highlighting
const currentPath = Astro.url.pathname;
---

<Layout title={title}>
    <div class="min-h-screen  flex">
        <!-- Sidebar Component -->
        <AdminSidebar currentPath={currentPath} />

        <!-- Contenido principal -->
        <main class="flex-1 ml-64 pt-20 min-h-screen">
            <div class="p-6">
                <slot />
            </div>
        </main>
    </div>
</Layout>