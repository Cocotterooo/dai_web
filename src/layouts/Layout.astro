---
import "@/styles/global.css";
import NavBar from "@/layouts/NavBar/NavBar.astro";
import Footer from "@/layouts/Footer/Footer.astro";
import { Font } from 'astro:assets';
import BlueMistBackground from "@/components/common/BlueMistBackground.astro";

---

<!doctype html>
<html lang="es" style="background-color: #0a1628;">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<!-- HTML Meta Tags -->
		<title>Delegación de Alumnado de Industriales - EEI - UVigo</title>
		<link rel="icon" type="image/svg+xml" href="/DAI_favicon.svg" />
		<meta name="theme-color" content="#00ace2" />
		<meta
			name="description"
			content={"La Delegación de Alumnos de Industriales es un órgano de representación estudiantil que defiende los intereses de los estudiantes de la Escuela de Ingeniería Industrial de la Universidad de Vigo. Descubre eventos, asesoría académica y cómo participar en la vida universitaria."}
		/>

		<!-- Open Graph Meta Tags -->
		<meta
			property="og:title"
			content="Delegación de Alumnos de Industriales - UVigo"
		/>
		<meta
			property="og:description"
			content={"La Delegación de Alumnos de Industriales es un órgano de representación estudiantil que defiende los intereses de los estudiantes de la Escuela de Ingeniería Industrial de la Universidad de Vigo. Descubre eventos, asesoría académica y cómo participar en la vida universitaria."}
		/>
		<meta property="og:image" content={""} />

		<!-- Twitter/X Meta Tags -->
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:site" content="@dai_uvigo" />
		<meta
			name="twitter:title"
			content="Delegación de Alumnos de Industriales - UVigo"
		/>
	</head>
	<Font cssVariable='--font-roboto' preload />
	<body style="background-color: #0a1628; margin: 0; padding: 0;">
		<NavBar/>
		<slot />
		<Footer/>
		<background class="fixed inset-0 -z-1 bg-azul-oscuro">
			{/*<AnimatedBackground client:load/>*/}
			<BlueMistBackground />
		</background>
		
		<!-- Smooth scroll functionality -->
		<script>
			/**
			 * Scrolls smoothly to a target element with proper offset calculation
			 */
			function scrollToSection(targetSelector: string, customOffset: number = 32) {
				const targetElement = document.querySelector(targetSelector);
				
				if (!targetElement) {
					console.warn('Target element not found:', targetSelector);
					return;
				}
				
				// Get navbar height dynamically
				const navbar = document.querySelector('header[class*="fixed"]');
				const navbarHeight = navbar ? navbar.getBoundingClientRect().height : 56; // fallback to 56px (3.5rem)
				
				const totalOffset = navbarHeight + customOffset;
				const elementPosition = targetElement.getBoundingClientRect().top;
				const offsetPosition = elementPosition + window.pageYOffset - totalOffset;
				
				window.scrollTo({
					top: offsetPosition,
					behavior: 'smooth',
				});
			}

			/**
			 * Initialize smooth scroll for elements with data-scroll-target attribute
			 */
			function initSmoothScroll() {
				const scrollTriggers = document.querySelectorAll('[data-scroll-target]');
				
				scrollTriggers.forEach(trigger => {
					trigger.addEventListener('click', (e) => {
						e.preventDefault();
						const target = trigger.getAttribute('data-scroll-target');
						const offsetAttr = trigger.getAttribute('data-scroll-offset');
						const customOffset = offsetAttr ? parseInt(offsetAttr) : 32;
						
						if (target) {
							scrollToSection(target, customOffset);
						}
					});
				});
			}

			// Initialize when DOM is loaded
			document.addEventListener('DOMContentLoaded', initSmoothScroll);
		</script>
	</body>

	<style>
		html,
		body {
			font-family: var(--font-roboto);
			margin: 0;
			padding: 0;
			width: 100%;
			min-height: 100vh;
			background: transparent;
			overflow-x: hidden;
			box-sizing: border-box;
		}
	</style>
</html>
