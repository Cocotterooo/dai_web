---
// Componente del formulario de login
import Button from "@/components/ui/Button.astro";
import Input from "@/components/ui/Input.astro";
---

<div id="form-login" class="tab-content space-y-6">
  <h2 class="text-3xl font-bold text-center text-white mb-6">Bienvenido de nuevo</h2>
  <form action="/api/auth/signin" method="POST" class="space-y-6" data-astro-reload>
    <div class="space-y-4">
      <div>
        <label for="login-email" class="block text-sm font-medium text-white/80 mb-1">
          Correo electrónico *
        </label>
        <Input 
          type="email" 
          id="login-email"
          placeholder="enfinserafin@gmail.com" 
          variant="auth"
          name="email"
          required
        />
      </div>
      <div>
        <label for="login-password" class="block text-sm font-medium text-white/80 mb-1">
          Contraseña *
        </label>
        <div class="relative">
          <Input 
            type="password" 
            id="login-password"
            placeholder="Contraseña" 
            variant="auth"
            name="password"
            required
            className="pr-12"
          />
          <button
            type="button"
            id="toggle-login-password"
            class="absolute right-3 top-1/2 transform -translate-y-1/2 text-white/60 hover:text-white transition-colors"
            aria-label="Mostrar/ocultar contraseña"
          >
            <svg id="eye-icon-login" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-eye"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" /><path d="M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6" /></svg>
            <svg id="eye-off-icon-login" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-eye-off hidden"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10.585 10.587a2 2 0 0 0 2.829 2.828" /><path d="M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87" /><path d="M3 3l18 18" /></svg>
          </button>
        </div>
      </div>
    </div>
    
    <!-- 
    <div class="flex items-center justify-between text-sm">
      <label class="flex items-center gap-2 cursor-pointer">
        <input type="checkbox" class="accent-dai rounded" />
        <span class="text-white/90">Recordarme</span>
      </label>
      <a href="#" class="text-dai hover:text-azul-brillante transition-colors duration-300">
        ¿Olvidaste tu contraseña?
      </a>
    </div>
    -->

    <Button 
      type="submit" 
      variant="primary" 
      size="md"
      className="w-full"
    >
      Iniciar sesión
    </Button>
  </form>
</div>

<script is:inline type="module">
  // Funcionalidad para mostrar/ocultar contraseña en login
  const toggleBtn = document.getElementById('toggle-login-password');
  const passwordInput = document.getElementById('login-password');
  const eyeIcon = document.getElementById('eye-icon-login');
  const eyeOffIcon = document.getElementById('eye-off-icon-login');
  
  if (toggleBtn && passwordInput && eyeIcon && eyeOffIcon) {
    toggleBtn.addEventListener('click', function() {
      if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        eyeIcon.classList.add('hidden');
        eyeOffIcon.classList.remove('hidden');
      } else {
        passwordInput.type = 'password';
        eyeIcon.classList.remove('hidden');
        eyeOffIcon.classList.add('hidden');
      }
    });
  }
</script>
